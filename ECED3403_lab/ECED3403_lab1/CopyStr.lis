X-Makina Assembler - Version XM-23P Single Pass+ Assembler - Release 24.04.17
Input file name: CopyStr.asm
Time of assembly: Wed 15 May 2024 13:58:49 
  1	    	     	;
  2	    	     	; Copy one string to another
  3	    	     	; ECED 3403
  4	    	     	; 15 May 24
  5	    	     	;
  6	    	     	NUL	equ	#0
  7	    	     	;
  8	    	     		CODE
  9	    	     		org	#1000
 10	    	     	;
 11	1000	6A00	Main	movlz	InStr,R0	; R0 <- 0040
 12	1002	6C01		movlz	OutStr,R1	; R1 <- 0080
 13	    	     	;
 14	1004	5842	Copy	ld.b	R0,R2		; ch <- mem[R0]
 15	1006	45C2		cmp.b	NUL,R2		; ch = NUL?
 16	1008	2004		beq	CDone		; Yes: ==> Done
 17	    	     	;
 18	100A	5C51		st.b	R2,R1		; mem[R1] <- ch
 19	    	     	;
 20	    	     	; Next locations
 21	    	     	; There is a "better" way of doing this
 22	    	     	;
 23	100C	4088		add	#1,R0
 24	100E	4089		add	#1,R1
 25	    	     	;
 26	1010	3FF9		bra	Copy
 27	    	     	;
 28	    	     	; NUL found - write to outstr.
 29	    	     	; R1 points to last location
 30	    	     	;
 31	    	     	CDone
 32	1012	5C51		st.b	R2,R1		; R2 is NUL
 33	    	     	;
 34	    	     	; Finished - busy wait
 35	    	     	;
 36	1014	3FFF	BWait	bra	BWait
 37	    	     	;
 38	    	     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 39	    	     	;
 40	    	     	; Data space
 41	    	     	;
 42	    	     		DATA
 43	    	     		org	#40
 44	    	     	;
 45	    	     	; Input string
 46	    	     	;
 47	0040	6854	InStr	ascii	"This is an ASCII string"
 47	0042	7369
 47	0044	6920
 47	0046	2073
 47	0048	6E61
 47	004A	4120
 47	004C	4353
 47	004E	4949
 47	0050	7320
 47	0052	7274
 47	0054	6E69
 47	0056	0067
 48	0057	0000		byte $0
 49	    	     	;
 50	    	     	; Output string
 51	    	     	; Use ASCII instead of BSS to check for NUL terminator
 52	    	     	;
 53	    	     		org	#80
 54	0080	2323	OutStr	ascii	"#############################################"
 54	0082	2323
 54	0084	2323
 54	0086	2323
 54	0088	2323
 54	008A	2323
 54	008C	2323
 54	008E	2323
 54	0090	2323
 54	0092	2323
 54	0094	2323
 54	0096	2323
 54	0098	2323
 54	009A	2323
 54	009C	2323
 54	009E	2323
 54	00A0	2323
 54	00A2	2323
 54	00A4	2323
 54	00A6	2323
 54	00A8	2323
 54	00AA	2323
 54	00AC	0023
 55	    	     	
 56	    	     	;
 57	    	     		end	Main

Successful completion of assembly - 2P

** Symbol table **

Constants (Equates)
Name                               	Type	Value	Decimal
NUL                                	CON	0000	0	PRI

Labels (Code)
Name                               	Type	Value	Decimal
BWait                              	REL	1014	4116	PRI
CDone                              	REL	1012	4114	PRI
Copy                               	REL	1004	4100	PRI
Main                               	REL	1000	4096	PRI

Labels (Data)
Name                               	Type	Value	Decimal
OutStr                             	REL	0080	128	PRI
InStr                              	REL	0040	64	PRI

Registers
Name                               	Type	Value	Decimal
R7                                 	REG	0007	7	PRI
R6                                 	REG	0006	6	PRI
R5                                 	REG	0005	5	PRI
R4                                 	REG	0004	4	PRI
R3                                 	REG	0003	3	PRI
R2                                 	REG	0002	2	PRI
R1                                 	REG	0001	1	PRI
R0                                 	REG	0000	0	PRI

.XME file: C:\Users\grace\OneDrive\Desktop\Summer 2024\ECED3403\ECED3403_lab\ECED3403_lab1\CopyStr.xme

